<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>niconicomments documentation</title>
    <link rel="stylesheet" type="text/css" href="./style.css" />
    <script src="https://cdn.jsdelivr.net/npm/i18next@22.0.5/dist/umd/i18next.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/i18next-browser-languagedetector@7.0.1/dist/umd/i18nextBrowserLanguageDetector.min.js"></script>
  </head>
  <body>
    <aside id="aside">
      <h1>Index</h1>
      <div id="index">
        <ul>
          <li>
            niconicomments
            <ul>
              <li><a href="#about">About</a></li>
              <li><a href="#sample">Sample</a></li>
              <li><a href="#install">Install</a></li>
              <li><a href="#example">Example</a></li>
            </ul>
          </li>
          <li>
            <a href="#class">Class</a>
            <ul>
              <li>
                <a href="#NiconiComments">NiconiComments</a>
                <ul>
                  <li>
                    <a href="#Parameters">Parameters</a>
                    <ul>
                      <li><a href="#p_canvas">canvas</a></li>
                      <li><a href="#p_data">data</a></li>
                      <li>
                        <a href="#p_options">options</a>
                        <ul>
                          <li><a href="#p_config">config</a></li>
                          <li><a href="#p_debug">debug</a></li>
                          <li>
                            <a href="#p_drawAllImageOnLoad"
                              >drawAllImageOnLoad</a
                            >
                          </li>
                          <li>
                            <a href="#p_enableLegacyPiP">enableLegacyPiP</a>
                          </li>
                          <li><a href="#p_format">format</a></li>
                          <li><a href="#p_formatted">formatted</a></li>
                          <li><a href="#p_keepCA">keepCA</a></li>
                          <li><a href="#p_mode">mode</a></li>
                          <li><a href="#p_scale">scale</a></li>
                          <li><a href="#p_showCollision">showCollision</a></li>
                          <li>
                            <a href="#p_showCommentCount">showCommentCount</a>
                          </li>
                          <li><a href="#p_showFPS">showFPS</a></li>
                          <li><a href="#p_useLegacy">useLegacy</a></li>
                          <li><a href="#p_video">video</a></li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                  <li>
                    <a href="#Methods">Methods</a>
                    <ul>
                      <li><a href="#m_addComments">addComments</a></li>
                      <li>
                        <a href="#m_addEventListener">addEventListener</a>
                      </li>
                      <li>
                        <a href="#m_removeEventListener">removeEventListener</a>
                      </li>
                      <li><a href="#m_drawCanvas">drawCanvas</a></li>
                      <li><a href="#m_clear">clear</a></li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li>
            <a href="#commands">Custom Commands</a>
            <ul>
              <li><a href="#c_flash">Flash</a></li>
              <li><a href="#c_stroke">Stroke Color</a></li>
              <li><a href="#c_waku">Waku</a></li>
              <li><a href="#c_fill">Fill</a></li>
              <li><a href="#c_opacity">Opacity</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </aside>
    <main id="main">
      <section id="title">
        <h1><span class="package_name">niconicomments</span> documentation</h1>
      </section>
      <section id="about">
        <h2>About</h2>
        <p data-i18n="about_desc"></p>
        <p>
          <span data-i18n="about_docs"></span>
          <a href="https://xpadev-net.github.io/niconicomments/"
            >https://xpadev-net.github.io/niconicomments/</a
          >
        </p>
        <p>
          TypeDoc:
          <a href="https://xpadev-net.github.io/niconicomments/type/"
            >https://xpadev-net.github.io/niconicomments/type/</a
          >
        </p>
        <p>
          <span data-i18n="about_repo"></span>
          <a href="https://github.com/xpadev-net/niconicomments"
            >https://github.com/xpadev-net/niconicomments</a
          >
        </p>
        <p>
          npm:
          <a href="https://www.npmjs.com/package/@xpadev-net/niconicomments"
            >https://www.npmjs.com/package/@xpadev-net/niconicomments</a
          >
        </p>
      </section>
      <section id="sample">
        <h2>Sample</h2>
        <ul>
          <li>
            <a
              href="https://xpadev-net.github.io/niconicomments/sample/"
              data-i18n="sample"
            ></a>
          </li>
        </ul>
      </section>
      <section id="install">
        <h2>Install</h2>
        <p>NodeJS:</p>
        <pre><code>npm i @xpadev-net/niconicomments</code></pre>
        <p>Web:</p>
        <pre><code><span class="blue">&lt;script <span class="yellow">src=</span><span class="green">&quot;https://cdn.jsdelivr.net/npm/@xpadev-net/niconicomments@latest/dist/bundle.min.js&quot;</span>&gt;&lt;/script&gt;</span></code></pre>
      </section>
      <section id="example">
        <h2>Example</h2>
        <h3 data-i18n="example_canvas"></h3>
        <pre><code><span class="orange">const</span> canvas = <span class="blue">document</span>.<span class="yellow">getElementById</span>(<span class="green">&quot;canvas&quot;</span>);
<span class="orange">const</span> video = <span class="blue">document</span>.<span class="yellow">getElementById</span>(<span class="green">&quot;video&quot;</span>);
<span class="orange">const</span> req = <span class="orange">await</span> <span class="yellow">fetch</span>(<span class="green">&quot;sample.json&quot;</span>);
<span class="orange">const</span> res = <span class="orange">await</span> req.<span class="yellow">json</span>();
<span class="orange">const</span> niconiComments = <span class="orange">new</span> <span class="blue">NiconiComments</span>(canvas, res);
<span class="red">setInterval</span>(() =&gt; niconiComments.<span class="yellow">drawCanvas</span>(<span class="orange">Math</span>.<span class="red">floor</span>(video.currentTime * <span class="yellow">100</span>)), <span class="yellow">10</span>);</code></pre>
        <h3 data-i18n="example_canvas_renderer"></h3>
        <pre><code><span class="orange">const</span> canvas = <span class="blue">document</span>.<span class="yellow">getElementById</span>(<span class="green">&quot;canvas&quot;</span>);
<span class="orange">const</span> video = <span class="blue">document</span>.<span class="yellow">getElementById</span>(<span class="green">&quot;video&quot;</span>);
<span class="orange">const</span> req = <span class="orange">await</span> <span class="yellow">fetch</span>(<span class="green">&quot;sample.json&quot;</span>);
<span class="orange">const</span> res = <span class="orange">await</span> req.<span class="yellow">json</span>();
<span class="orange">const</span> renderer = <span class="orange">new</span> <span class="blue">NiconiComments</span>.internal.renderer.<span class="yellow">CanvasRenderer</span>(canvas);
<span class="orange">const</span> niconiComments = <span class="orange">new</span> <span class="blue">NiconiComments</span>(renderer, res);
<span class="red">setInterval</span>(() =&gt; niconiComments.<span class="yellow">drawCanvas</span>(<span class="orange">Math</span>.<span class="red">floor</span>(video.currentTime * <span class="yellow">100</span>)), <span class="yellow">10</span>);</code></pre>
      </section>
      <section id="patent" data-i18n="for_user"></section>
      <section id="class">
        <h2>Class</h2>
        <h4 id="NiconiComments">
          class <span class="red">NiconiComments</span>(canvas<span class="type"
            >:HTMLCanvasElement |
            <a href="./type/interfaces/_types_renderer.IRenderer.html"
              >IRenderer</a
            ></span
          >, data<span class="type"
            >:<a href="./type/types/_types_options.inputFormat.html"
              >inputFormat</a
            ></span
          >, options<span class="type"
            >:<a href="./type/modules/_types_types.html#InitOptions"
              >InitOptions</a
            ></span
          >)
        </h4>
        <div class="item">
          <p data-i18n="class_main">このライブラリの本体です</p>
          <h3 id="Parameters">Parameters</h3>
          <div class="item">
            <h4 id="p_canvas">
              canvas<span class="type"
                >:HTMLCanvasElement |
                <a href="./type/interfaces/_types_renderer.IRenderer.html"
                  >IRenderer</a
                ></span
              >
            </h4>
            <div class="item" data-i18n="p_canvas"></div>
            <h4 id="p_data">
              data<span class="type"
                >:<a href="./type/types/_types_options.inputFormat.html"
                  >inputFormat</a
                ></span
              >
            </h4>
            <div class="item" data-i18n="p_data"></div>
            <h4 id="p_options">
              options<span class="type"
                >:<a href="./type/types/_types_options.InitOptions.html"
                  >InitOptions</a
                ></span
              >
            </h4>
            <div class="item">
              <h4 id="p_config">
                config<span class="type"
                  ><a href="./type/types/_types_config.Config.html"
                    >:Config</a
                  ></span
                >
                = {}
              </h4>
              <div class="item" data-i18n="p_config"></div>
              <h4 id="p_debug">
                debug<span class="type">:boolean</span> =
                <span class="yellow">false</span>
              </h4>
              <div class="item" data-i18n="p_debug"></div>
              <h4 id="p_enableLegacyPiP">
                enableLegacyPiP<span class="type">:boolean</span> =
                <span class="yellow">false</span>
              </h4>
              <div class="item" data-i18n="p_enableLegacyPiP"></div>
              <h4 id="p_format">
                format<span class="type"
                  >:<a href="./type/modules/_types_types.html#inputFormatType"
                    >inputFormatType</a
                  ></span
                >
                = <span class="green">"legacy"</span>
              </h4>
              <div class="item" data-i18n="p_format">
                <p>入力フォーマットを指定します</p>
                <p>対応しているフォーマットは以下のとおりです</p>
                <table>
                  <thead>
                    <tr>
                      <th>名前</th>
                      <th>dataのtype</th>
                      <th>備考</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>niconicome</td>
                      <td class="type">XMLDocument</td>
                      <td>
                        XMLをDOMParserでparseFromStringしたものを渡してください
                      </td>
                    </tr>
                    <tr>
                      <td>formatted</td>
                      <td class="type">
                        <a
                          href="./type/types/_types_format_formatted.formattedComment.html"
                          >formattedComment</a
                        >[] |
                        <a
                          href="./type/types/_types_format_formatted.formattedLegacyComment.html"
                          >formattedLegacyComment</a
                        >[]
                      </td>
                      <td>
                        user_idとlayerが含まれない場合はformattedLegacyCommentになります
                      </td>
                    </tr>
                    <tr>
                      <td>legacy</td>
                      <td class="type">
                        <a
                          href="./type/types/_types_format_legacy.rawApiResponse.html"
                          >rawApiResponse</a
                        >[]
                      </td>
                      <td>
                        legacy
                        apiのレスポンスをJSON.parseしたものを渡してください
                      </td>
                    </tr>
                    <tr>
                      <td>owner</td>
                      <td class="type">
                        <a
                          href="./type/types/_types_format_owner.ownerComment.html"
                          >ownerComment</a
                        >[]
                      </td>
                      <td>
                        投稿者コメント編集画面のエディータのjsonをそのまま渡してください
                      </td>
                    </tr>
                    <tr>
                      <td>legacyOwner</td>
                      <td class="type">string</td>
                      <td>
                        旧投稿者コメント編集画面のエディータの文字列(改行含む)をそのまま渡してください
                      </td>
                    </tr>
                    <tr>
                      <td>v1</td>
                      <td class="type">
                        <a href="./type/types/_types_format_v1.v1Thread.html"
                          >v1Thread</a
                        >[]
                      </td>
                      <td>v1 apiのdata以下threadsの内容を渡してください</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <h4 id="p_formatted">
                formatted<span class="type">:boolean</span> =
                <span class="yellow">false</span>
              </h4>
              <div class="item deprecated" data-i18n="p_formatted">
                <p>
                  <span class="warn"
                    >このオプションは非推奨です。<a href="#p_format">format</a
                    >オプションを使用してください</span
                  >
                </p>
                <p>コメントデータが独自フォーマットかを指定します</p>
                <p>
                  デフォルト(<span class="yellow">false</span
                  >)の場合は独自フォーマットに変換を行ってから処理を行います
                </p>
                <p>
                  <span class="yellow">true</span>の場合はそのまま処理を行います
                </p>
              </div>
              <h4 id="p_keepCA">
                keepCA<span class="type">:boolean</span> =
                <span class="yellow">false</span>
              </h4>
              <div class="item" data-i18n="p_keepCA"></div>
              <h4 id="p_mode">
                mode<span class="type"
                  ><a href="./type/types/_types_options.modeType.html"
                    >:modeType</a
                  ></span
                >
                = <span class="green">"default"</span>
              </h4>
              <div class="item" data-i18n="p_mode"></div>
              <h4 id="p_scale">
                scale<span class="type">:number</span> =
                <span class="yellow">1</span>
              </h4>
              <div class="item" data-i18n="p_scale"></div>
              <h4 id="p_showCollision">
                showCollision<span class="type">:boolean</span> =
                <span class="yellow">false</span>
              </h4>
              <div class="item" data-i18n="p_showCollision"></div>
              <h4 id="p_showCommentCount">
                showCommentCount<span class="type">:boolean</span> =
                <span class="yellow">false</span>
              </h4>
              <div class="item" data-i18n="p_showCommentCount"></div>
              <h4 id="p_showFPS">
                showFPS<span class="type">:boolean</span> =
                <span class="yellow">false</span>
              </h4>
              <div class="item" data-i18n="p_showFPS"></div>
              <h4 id="p_useLegacy">
                useLegacy<span class="type">:boolean</span> =
                <span class="yellow">false</span>
              </h4>
              <div class="item deprecated" data-i18n="p_useLegacy"></div>
              <h4 id="p_video">
                video<span class="type">:HTMLVideoElement | null</span> =
                <span class="yellow">null</span>
              </h4>
              <div class="item" data-i18n="p_video"></div>
            </div>
          </div>
          <h3 id="Methods">Methods</h3>
          <div class="item">
            <h4 id="m_addComments">
              addComments(...comments<span class="type"
                ><a
                  href="./type/types/_types_format_formatted.formattedComment.html"
                  >:formattedComment</a
                ></span
              >)<span class="type">:void</span>
            </h4>
            <div class="item" data-i18n="m_addComments"></div>
            <h4 id="m_addEventListener">
              addEventListener(eventName<span class="type"
                ><a href="./type/types/_types_event.CommentEventName.html"
                  >:CommentEventName</a
                ></span
              >, eventHandler<span class="type"
                ><a
                  href="./type/interfaces/_types_event.CommentEventHandlerMap.html"
                  >:CommentEventHandler</a
                ></span
              >)<span class="type">:void</span>
            </h4>
            <div class="item" data-i18n="m_addEventListener"></div>
            <h4 id="m_removeEventListener">
              removeEventListener(eventName<span class="type"
                ><a href="./type/types/_types_event.CommentEventName.html"
                  >:CommentEventName</a
                ></span
              >, eventHandler<span class="type"
                ><a
                  href="./type/interfaces/_types_event.CommentEventHandlerMap.html"
                  >:CommentEventHandler</a
                ></span
              >)<span class="type">:void</span>
            </h4>
            <div class="item" data-i18n="m_removeEventListener"></div>
            <h4 id="m_drawCanvas">
              drawCanvas(vpos<span class="type">:number</span>)<span
                class="type"
                >:void</span
              >
            </h4>
            <div class="item" data-i18n="m_drawCanvas"></div>
            <h4 id="m_clear">clear()<span class="type">:void</span></h4>
            <div class="item" data-i18n="m_clear"></div>
          </div>
        </div>
      </section>
      <section id="commands">
        <h2>Custom Commands</h2>
        <div class="item">
          <p>niconicomments独自のコマンド</p>
        </div>
        <h3 id="c_flash">Flash</h3>
        <div class="item">
          <h4>format</h4>
          <div class="item">
            <pre><code>nico:flash</code></pre>
          </div>
          <div class="item" data-i18n="c_flash">
            <p>自動モード時にFlash版コメントとしての処理を強制します</p>
            <p>※HTML5モード時は無視されます</p>
            <p>
              ※自動モード時にHTML5版コメントとしての処理を強制させたい場合はdefont、mincho、gothicのいずれかを使用してください
            </p>
          </div>
        </div>
        <h3 id="c_stroke">Stroke Color</h3>
        <div class="item">
          <h4>format</h4>
          <div class="item">
            <pre><code>nico:stroke:(color|color code)</code></pre>
          </div>
          <h4>example</h4>
          <div class="item">
            <pre><code>nico:stroke:red
nico:stroke:#f0f
nico:stroke:#fff5</code></pre>
          </div>
          <div class="item" data-i18n="c_stroke">
            <p>コメントの縁取りの色を変更するできます</p>
            <p>色の指定は色コマンドまたはカラーコードで行ってください</p>
            <p>カラーコードは透明度も指定可能です</p>
          </div>
        </div>
        <h3 id="c_waku">Waku</h3>
        <div class="item">
          <h4>format</h4>
          <div class="item">
            <pre><code>nico:waku:(color|color code)</code></pre>
          </div>
          <h4>example</h4>
          <div class="item">
            <pre><code>nico:waku:red
nico:waku:#f0f
nico:waku:#fff5</code></pre>
          </div>
          <div class="item" data-i18n="c_waku">
            <p>コメント単位で枠の表示を制御できます</p>
            <p>色の指定は色コマンドまたはカラーコードで行ってください</p>
            <p>カラーコードは透明度も指定可能です</p>
          </div>
        </div>
        <h3 id="c_fill">Fill</h3>
        <div class="item">
          <h4>format</h4>
          <div class="item">
            <pre><code>nico:fill:(color|color code)</code></pre>
          </div>
          <h4>example</h4>
          <div class="item">
            <pre><code>nico:fill:red
nico:fill:#f0f
nico:fill:#fff5</code></pre>
          </div>
          <div class="item" data-i18n="c_fill">
            <p>コメント単位で背景色の表示を制御できます</p>
            <p>色の指定は色コマンドまたはカラーコードで行ってください</p>
            <p>カラーコードは透明度も指定可能です</p>
          </div>
        </div>
        <h3 id="c_opacity">Opacity</h3>
        <div class="item">
          <h4>format</h4>
          <div class="item">
            <pre><code>nico:opacity:(0 <= float <= 1)</code></pre>
          </div>
          <h4>example</h4>
          <div class="item">
            <pre><code>nico:opacity:0
nico:opacity:0.35
nico:opacity:1</code></pre>
          </div>
          <div class="item" data-i18n="c_opacity">
            <p>コメント単位で不透明度を制御できます</p>
            <p>1で不透明、0で透明になります</p>
          </div>
        </div>
      </section>
    </main>
  </body>
  <script src="./localize.js"></script>
</html>
